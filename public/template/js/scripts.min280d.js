function modalTrigger(e,o){console.log(e),"Ok"===e||"success"===e?(e="success",$("#errorModal .modal-header").removeClass("bg-warning bg-danger bg-success").addClass("bg-success"),$("#errorModal .modal-header div").html('<i class="la la-check-circle text-white"></i> <span class="text-bold text-white">Success</span>\n')):"No"===e||"danger"===e?(e="danger",$("#errorModal .modal-header").removeClass("bg-warning bg-danger bg-success").addClass("bg-danger"),$("#errorModal .modal-header div").html('<i class="la la-times-circle text-white"></i> <span class="text-bold text-white">Error</span>\n')):($("#errorModal .modal-header").removeClass("bg-warning bg-danger bg-success").addClass("bg-"+e),$("#errorModal .modal-header div").html('<i class="la la-warning text-dark"></i> <span class="text-bold text-white text-capitalize">'+e+"</span>\n")),$("#errorModal .modal-body").html("<span class='text-small'>"+o.replace(/!/g,"")+"</span>"),$("#errorModal").modal("toggle")}function datetimeinit(){var e=3e5,o=new Date,t=o.getTimezoneOffset();o.setTime(o.getTime()+6e4*t+198e5+6e5),o.setTime(Math.ceil((o.getTime()+2.5)/e)*e),$("#datepicker").datepicker({format:"yyyy-mm-dd",autoPick:!0,autoHide:!0,startDate:o}),$("#timepicker").wickedpicker({minutesInterval:5,twentyFour:!0,now:o.getHours()+" : "+o.getMinutes()}),(o=new Date).setTime(o.getTime()+6e4*t+198e5+72e5),o.setTime(Math.ceil((o.getTime()+2.5)/e)*e),$("#datepickerPackage").datepicker({format:"yyyy-mm-dd",autoPick:!0,autoHide:!0,startDate:o}),$("#timepickerPackage").wickedpicker({minutesInterval:5,twentyFour:!0,now:o.getHours()+" : "+o.getMinutes()})}function faresmoredetails(){$(".fares_more").hide();var e=0;$("i#fares_more").click((function(){e+=180,$(".fares_more").slideToggle((function(){$("i#fares_more").css({transform:"rotate("+e+"deg)"})}))}))}function nbNameCopy(){function e(){(console.log($('input[name="rootX"]:checked').val()),"Pick"===$('input[name="rootX"]:checked').val())?"94"!==$("#telephone").intlTelInput("getSelectedCountryData").dialCode?($("#fares_nb").prop("checked")||$("#fares_nb").trigger("click").attr("type","hidden").val("true"),$(".nb_optional").hide()):$("#fares_nb").prop("checked")&&"true"==$("#fares_nb").val()&&(console.log("local"),$("#fares_nb").attr("type","checkbox").trigger("click").val("true"),$(".nb_optional").show()):$("#fares_nb").prop("checked")&&(console.log("N/A"),$("#fares_nb").trigger("click").attr("type","checkbox").val(""))}$("body").on("click touchend","#same_nb",(function(e){var o=$("#customerFirstName").val()+" "+$("#customerLastName").val();$("#same_nb").is(":checked")?$("#pagingBoard").val(o):$("#pagingBoard").val("")})),$("body").on("change","input#fares_nb",(function(){if($("input#fares_nb").is(":checked")){$("#nameboard").slideDown();var e=$("#customerFirstName").val()+" "+$("#customerLastName").val();$("input#same_nb").prop("checked",!0),$("#pagingBoard").val(e),$('input[name="root"]').val("Guest")}else $("#nameboard input").val(""),$("input#same_nb").prop("checked",!1),$("#nameboard").slideUp(),$('input[name="root"]').val("Pick")})),$("body").on("keyup","#customerFirstName, #customerLastName",(function(){if($("#same_nb").is(":checked")){var e=$("#customerFirstName").val()+" "+$("#customerLastName").val();$("#pagingBoard").val(e)}})),$("body").on("change","input#telephone",(function(){e()})),document.querySelector("#telephone").addEventListener("countrychange",(function(){var o=$(this).intlTelInput("getSelectedCountryData").dialCode;$("input#countrycode").val(o),e()}))}function telephone(e="telephone",o=""){const t=e,n=$("#"+t);let i={preferredCountries:["lk","us","gb","cn","in"],separateDialCode:!0,formatOnDisplay:!0,autoFormat:!0,nationalMode:!1,utilsScript:site_url+"template/js/telutils.js"};""!==o&&(i.placeholderNumberType=o),n.intlTelInput(i),n.keyup((function(){if($(this).intlTelInput("isValidNumber")){$(this).css("border-color","green"),$("#phone").removeClass("wrong_no");var e=$(this).intlTelInput("getSelectedCountryData").dialCode;$("input#countrycode, #"+t+"-countrycode").val(e)}else $(this).css("border-color","red"),$("#phone").addClass("wrong_no")})),window.addEventListener("countrychange",(function(){var o=n.intlTelInput("getSelectedCountryData").dialCode;$("#"+e+"-countrycode").val(o)}))}function airportmoreinfo(){$("#airport-info").hide(),$("#airport-booking-form h3").on("click","#airport-info-button",(function(){$("form.airport-booking-form").toggle(),$("div#airport-info").toggle(),$("#airport-info-button").toggleClass("text-muted text-warning")})),$("#airport-info-close").on("click",(function(){$("form.airport-booking-form").show(),$("div#airport-info").hide(),$("#airport-info-button").toggleClass("text-muted text-warning")}))}function airportforminit(){window.innerWidth>800&&$("label[data-toggle='popover']").popover({trigger:"hover"}),$("#pickupmoreinfo, #pickupmoreinfo #nameboard").hide(),$('input[name="rootX"]').on("change",(function(e){e.preventDefault(),$("#pickupmoreinfo, #pickupmoreinfo #nameboard").hide(),"Pick"==$(this).val()?($("#datepicker").datepicker("pick"),$("#timepicker").val($("#timepicker").wickedpicker().wickedpicker("time")),$(".drop").slideDown(),$(".pickup, #fares").slideUp(),$('input[name="pickUpAddress"]').val("BIA Arrival Terminal, Katunayake, Sri Lanka"),$('input[name="pickUpLat"]').val("7.174482999999999"),$('input[name="pickUpLng"]').val("79.88811859999998"),$('input[name="pickUpId"]').val("ChIJQUWqmsfv4joRpB-K-ayScmE"),$('input[name="dropOffAddress"]').val(""),$('input[name="initialDropOffLat"]').val(""),$('input[name="initialDropOffLng"]').val(""),$('input[name="detailedPickUpAddress"]').val(""),$("#fares_nb_block").show(),$("#pickupmoreinfo").slideDown()):"Drop"==$(this).val()&&($("#datepicker").datepicker("pick"),$("#timepicker").val($("#timepicker").wickedpicker().wickedpicker("time")),$(".pickup").slideDown(),$(".drop, #fares").slideUp(),$('input[name="dropOffAddress"]').val("BIA Departure Terminal, Katunayake, Sri Lanka"),$('input[name="initialDropOffLat"]').val("7.157893399999999"),$('input[name="initialDropOffLng"]').val("79.87522160000003"),$('input[name="initialDropOffId"]').val("ChIJQbiEpdTv4joR2dZgG8X7zGI"),$('input[name="pickUpAddress"]').val(""),$('input[name="pickUpLat"]').val(""),$('input[name="pickUpLng"]').val(""),$('input[name="detailedPickUpAddress"]').val(""),$("#fares_nb_block").slideUp(),$("#pickupmoreinfo").slideUp())}))}function copyTextToClipboard(e){$("#bookingSuccessModal .modal-body").append("<input id='copyref' />");const o=$("input#copyref");o.val(e).select();let t=!1;try{t=document.execCommand("copy"),t&&(console.log(e),$("span#refid").html("COPIED"),setTimeout((function(){$("span#refid").html(e)}),2e3))}catch(e){console.log("Copy error: "+e)}o.remove()}function imgtosvg(){jQuery("img.svg").each((function(){var e=jQuery(this),o=e.attr("id"),t=e.attr("class"),n=e.data("src");jQuery.get(n,(function(n){var i=jQuery(n).find("svg");void 0!==o&&(i=i.attr("id",o)),void 0!==t&&(i=i.attr("class",t+" replaced-svg")),!(i=i.removeAttr("xmlns:a")).attr("viewBox")&&i.attr("height")&&i.attr("width")&&i.attr("viewBox","0 0 "+i.attr("height")+" "+i.attr("width")),e.replaceWith(i)}),"xml")}))}function zlin(){console.log("hi")}function userInfo(){var e={};$.ajax("https://ipapi.co/json/").then((function(o){e.ip=o.ip,e.country_name=o.country_name,e.country=o.country,e.region=o.region,e.city=o.city,e.iddCode=o.country_calling_code,e.timezone=o.timezone,e.isp=o.org,e.isp=o.asn,e.winH=$(window).height(),e.winW=$(window).width(),e.docH=$(document).height(),e.docW=$(document).width(),e.screenH=window.screen.height,e.screenW=window.screen.width,e.screenM=window.devicePixelRatio,e.cookieEnabled=navigator.cookieEnabled,e.language=navigator.language,e.online=navigator.onLine,e.platform=navigator.platform,e.userAgent=navigator.userAgent;var t=JSON.stringify(e);$("#user").val("")}),(function(e,o){$("#user").val("ip-api request failed.  Returned status of"+o)}))}function bookingform(){airportforminit(),airportmoreinfo(),imgtosvg(),datetimeinit(),telephone(),nbNameCopy(),faresmoredetails(),userInfo()}$(document).on("show.bs.modal",".modal",(function(){var e=1040+10*$(".modal:visible").length;$(this).css("z-index",e),setTimeout((function(){$(".modal-backdrop").not(".modal-stack").css("z-index",e-1).addClass("modal-stack")}),0)})),$(document).on("click","i.la-copy",(function(){copyTextToClipboard($("i.la-copy").data("refid"))})),$("form").on("click","i.la-paste",(function(e){e.preventDefault(),pasteTextFromClipboard("#booking_id")})),$(document).ready((function(){$("body").on("change",'input[name="rootX"]',(function(){$("#telephone").intlTelInput("setCountry","lk"),$("#fares_nb").attr("type","checkbox").val("true"),$("#fares_nb").prop("checked",!1),$("#telephone").val(""),"Pick"===$('input[name="rootX"]:checked').val()&&$(".nb_optional").show(),$('input[name="root"]').val($('input[name="rootX"]:checked').val())})),$(".navbar-nav>li>a").on("click",(function(){$(".navbar-collapse").collapse("hide")})),$("#help-menu-button").click((function(){$("#help-menu").toggleClass("d-none d-block")})),$(".help-menu-sub").hide(),$("ul#help-menu > li").click((function(){$(this).toggleClass("help-menu-item-active"),$(this).next("ul.help-menu-sub").slideToggle((function(){}))}));const e=window.location.href.replace(/\#$/,"");!0===debug&&console.log(e),$('a[href="'+e+'"]').addClass("active");const o=$(".breadcrumb-item.active").data("sidemenu");function t(){$("#home-booking-forms h3").text("Quick Booking"),$("#home-booking-forms h4#airport").hide(),$("#select-vehi-1").removeClass("d-none"),$("#quick-booking").addClass("d-none"),$("#airport-transfer").removeClass("d-none"),$(".pickup, .drop").slideDown((function(){console.log("shown drop/pickup")})),$("#select-root").slideUp(),$("#pickupmoreinfo, #pickupmoreinfo #nameboard").hide(),$("input#fares_nb").prop("checked",!1),$('input[name="rootX"]').prop("checked",!1),$('input[name="root"]').val("Quick"),$("#fares").slideUp(),datetimeinit()}function n(){$("#home-booking-forms h3").html('Airport Transfer<i class="la la-info-circle text-muted text-normal" id="airport-info-button"></i>'),$("#home-booking-forms h4#airport").show(),$("#select-vehi-1").addClass("d-none"),$("#quick-booking").removeClass("d-none"),$("#airport-transfer").addClass("d-none"),$(".pickup, .drop").slideUp((function(){})),$("#select-root").slideDown(),$("#fares").slideUp(),airportforminit()}$("ul.help-menu-sub#"+o).slideDown((function(){$(this).prev("li").addClass("help-menu-item-active")})),$("nav#about-tabs button").click((function(e){e.preventDefault();var o=$(this).attr("id");$("div.container.about-tabs").removeClass("d-none").addClass("d-none"),$("div.container#about-tabs-"+o).removeClass("d-none"),$("button").removeClass("btn-secondary").addClass("btn-outline-secondary"),$(this).toggleClass("btn-outline-secondary btn-secondary")})),$(".faq-item").find("p").hide(),$(".faq-item").click((function(){$(this).find("i").toggleClass("r-180"),$(this).find("p").slideToggle()})),$(".fleet-pagination").on("click",".fleet-thumb",(function(){const e=$(this).attr("id");$(".fleet-single-vehicle").slideUp(),$("#desc-"+e).slideDown({start:function(){$(this).css({display:"flex"})}})})),$(".career-vacancy").hide(),$(".career-vacancy:first-child").show(),$(".career-vacancy-tab:first-child").removeClass("btn-outline-secondary").addClass("btn-secondary"),$(".career-vacancy-tab").click((function(e){e.preventDefault();const o=$(this).attr("id");$(".career-vacancy").hide(),$(".career-vacancy-tab").removeClass("btn-secondary").addClass("btn-outline-secondary"),$(this).removeClass("btn-outline-secondary").addClass("btn-secondary"),$(".career-vacancy#desc-"+o).show()})),$("#home-page-menu a").on("click",(function(e){if(""!==this.hash){e.preventDefault();const o=this.hash;$("html, body").animate({scrollTop:$(o).offset().top},800,(function(){}))}})),$(".promotion").on("click",(function(){const e=$(this).attr("data-promoid");$.ajax({data:{id:e},type:"GET",url:site_url+"ajax.php?process=promotion-process",success:function(e){$("#promo").modal({show:!0});const o=JSON.parse(e);"Err404"!==o[0].title?($(".modal-title").html(o[0].title),$("#modal-desc").html(o[0].promo_desc),$(".modal-body").removeClass("invisible"),$(".modal-footer").removeClass("invisible"),$("#modal-from").html(o[0].start_datetime),$("#modal-to").html(o[0].end_datetime),$("#modal-promocode").html(o[0].promo_code),$("#modal-offeramt").html(o[0].offer_amount+"%"),$("#modal-minamt").html("LKR "+o[0].minimum_fare),$("#modal-vtypename").html(o[0].vehicle_type),$("#modal-vdesc").html(o[0].vehi_desc),$("#modal-promoimg").attr("src",site_url+"resources/images/promos/"+o[0].img),$("#modal-vtype").attr("src",site_url+"resources/images/vtypes/"+o[0].vehicle_type+".png")):($(".modal-title").html("Error: Invalid Promo ID"),$(".modal-body").addClass("invisible"),$(".modal-footer").addClass("invisible"),$("#modal-promoimg").attr("src",site_url+"resources/images/promos/default.jpg"),$("#modal-vtype").attr("src",site_url+"resources/images/vtypes/default.png"))},error:function(e,o,t){},complete:function(){}})}));const i=sessionStorage.getItem("booking-form");null===i||""===i?n():"quick-booking"===i?t():"airport-transfer"===i&&n(),$("#home-booking-forms #booking-nav span").click((function(e){e.preventDefault();const o=$(this).attr("id");console.log(o),$(".pickup #origin").val(""),$(".pickup #pickUpId").val(""),$(".pickup #pickUpLat").val(""),$(".pickup #pickUpLng").val(""),$(".pickup #detailedPickUpAddress").val(""),$(".drop #destination").val(""),$(".drop #initialDropOffId").val(""),$(".drop #initialDropOffLat").val(""),$(".drop #initialDropOffLng").val(""),sessionStorage.setItem("booking-form",o);const i=sessionStorage.getItem("booking-form");"quick-booking"===i?t():"airport-transfer"===i&&n()})),$("body").on("focus","#origin, #destination, #booking_id",(function(){this.select()})),$('input[type="reset"]').click((function(){$(this).parents("form").nextAll(".message").slideUp((function(){$(this).html("")}))})),$("body").on("click","#closeModal",(function(){$("#bookingSuccessModal").modal("hide")})),$(document).on("shown.bs.modal",(function(e){datetimeinit(),telephone("cancelTelephone"),imgtosvg(),window.innerWidth>800&&$("label[data-toggle='popover']").popover({trigger:"hover"})})),$("body").on("change",'.airport-booking-form input[name="vehicularType"]',(function(){const e=localStorage.getItem("booking-form");$('input[name="rootX"]').is(":checked")||"airport-booking"!=e||alert("Please select a airport transfer type first.")})),$("body").on("click",'input[name="pickUpAddress"], input[name="dropOffAddress"]',(function(){var e=$('.booking-validate input[name="vehicularType"]:checked').val();$('.booking-validate input[name="vehicularType"]').length&&void 0===e&&alert("Please select a vehicle type")}));$("#telephone");const a=$('input[name="rootX"]:checked').val();"Pick"!==a&&"Drop"!==a||$("body").on("focus",'input[name="pickUpAddress"], input[name="dropOffAddress"]',(function(){$("#telephone").intlTelInput("isValidNumber")})),$("#booking_id").on("change",(function(){const e=$("#booking_id").val();$("#booking_id").val(e.toUpperCase())})),window.innerWidth<800&&($("#home-app-slider").insertAfter($("#how-app-works")),$("#home-airport-tr-image").insertAfter($("#home-airport-tr-heading")),$("#home-manage-booking-image").insertAfter($("#home-manage-booking-heading"))),function(){const e=navigator.userAgent||navigator.vendor||window.opera;/windows phone/i.test(e)&&!0===debug&&console.log("Windows Phone"),/android/i.test(e)&&(!0===debug&&console.log("Android"),$("#app-ad-link").attr("href","market://details?id=kangaroo.lk.clientapp")),/iPad|iPhone|iPod/.test(e)&&!window.MSStream&&(!0===debug&&console.log("iOS"),$("#appInstallModal .modal-body").removeClass("android-ad"),$("#app-ad-desc3").html("FREE - on the App Store"),$("#app-ad-link").attr("href","itms://itunes.apple.com/lk/app/kangaroo-cabs-2588588/id1166543666"))}(),$("#appInstallModal").on("shown.bs.modal",(function(){$(document).off("focusin.modal")})),telephone("cus_contact"),telephone("manage-tel"),telephone("login-tel"),$("#logout").on("click",(function(e){e.preventDefault(),ajaxDirect("miles-logout",{})}))}));